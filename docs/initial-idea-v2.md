# StoryFold 初步设想（v2.1）

现在我要开发一个用 LLM 辅助用户创作文字作品（主要是故事和知识普及文章）的应用。所创作的作品的主要目标读者是少年儿童。

---

## 一、业务环节

### 1. 人机交互梳理需求

1. 用户先提出要求。
2. 人机交互，形成正式要求（**写作要点**）。

**补充说明：** 写作要点做成可结构化、可复用的格式，便于后续提纲、备注版大纲写作和类型库引用，也便于纳入创作档案与创作知识库。比如包含的字段示例：目标读者年龄/年级、体裁、主题、禁忌与敏感内容边界、预期篇幅、风格关键词等。**视作品篇幅长短安排循环，按先粗后细、远粗近细，先整体后局部、由近到远的程序多步骤调整，如同绘画一样整体与局部兼顾，多重修改、完善、渲染；并检查调整后的一致性。**

### 2. 人机交互梳理提纲与写作备注版大纲

1. 通过 LLM 根据写作要点生成一个提纲；LLM 与用户交流，修改完善提纲。
2. 在已有提纲的基础上，LLM 帮助用户把设定信息和场景/节拍备注**直接插入大纲之中**，形成「备注版大纲」；人机交互完善备注版大纲。备注版大纲**不预先写完整篇故事**，而是参照影视的「设定集 + 分镜/剧本备注」做法：在大纲每一节点上，补充**必须遵守的设定与时间线信息**，以及**按场景/节拍的要点与可选参考**，供最终创作时查阅、选用或改写，而非逐字缩写。

**备注版大纲的定位与设计（参考影视设定集 + 分镜/剧本备注）：**

- **一句话定义：** 备注版大纲 = 在基础提纲上**嵌入设定与场景级备注**的扩展版大纲，不直接面向读者；最终作品是**依据这些嵌入的大纲备注重新书写**的成稿，不是对备注版大纲的缩写或改写。
- **两大部分（避免束缚最终创作）：**
  - **设定集（必须一致的部分）**：时代/世界规则、主要人物（身份、动机、关系、弧光）、时间线与关键事件。最终作品在事实、人物一致性上需与此对齐；**不在此展开完整情节与对白**。
  - **场景/节拍备注（参考与可选）**：按提纲的每个场景或节拍，记录「本段须达成的结果/情绪节拍」、可选的情节要点、可用的细节或对白建议；可标注「待定」「方案 A/B」等，**不要求写成完整段落或监控录像式全记录**。最终创作时可按需采用、重组、省略或完全重写，以服务主线与节奏。
- **为何不采用「监控录像/纪录片原片」式全文：** 若背景已写成「非常完备而详细」的整篇叙事，最终步骤容易退化为「缩写/摘抄」背景，削弱创造性、语感与详略取舍。影视中分镜与剧本备注只给节拍与要点，正式剧本再创作；此处同理——背景提供**约束与素材**，最终稿**在现场重写**。
- **结构与标记：** 轻量 schema 或标记，区分「设定」与「场景备注」、以及备注中的「须达成/情绪」与「可选细节」；便于按需检索、按场景加载，并与创作档案/类型库关联。
- **篇幅与成本：** 以条目化、列表化为主，仅在关键处（如人物小传、复杂时间线）适度展开。长篇按章节/场景分单元生成与存储，最终作品生成时按需加载。**视作品篇幅长短安排循环，按先粗后细、远粗近细，先整体后局部、由近到远的程序多步骤调整，如同绘画一样整体与局部兼顾，多重修改、完善、渲染；并检查调整后的一致性。**

**补充说明：** 本阶段从「结构清晰的提纲」到「带设定与备注的备注版大纲」一气呵成，为试写样张样段提供骨架；对长篇或系列创作尤其有用。

### 3. 人机交互试写样张样段

1. 通过 LLM 根据写作要点和备注版大纲生成一个或多个样张样段（如果需要可用标记简略地注出省略部分）。
2. LLM 与用户交流，修改完善备注版大纲和样张样段。

**补充说明：** 支持「先按备注版大纲写一小段样章/样段，再回头改备注版大纲甚至基础提纲」的迭代方式，对长篇或系列创作尤其有用，不必强求大纲一次定稿。**视作品篇幅长短安排循环，按先粗后细、远粗近细，先整体后局部、由近到远的程序多步骤调整，如同绘画一样整体与局部兼顾，多重修改、完善、渲染；并检查调整后的一致性。**

### 4. 人机交互创作最终作品

1. 大语言模型**依据备注版大纲中的设定与场景备注**创作最终作品：遵守设定集的一致性，按场景节拍与备注书写成篇；可对备注中的可选内容进行选用、重组、省略或重写，以达成主线明确、情节清晰、详略得当、人物有特点、细节具体可感，并保持知识与逻辑严谨。最终作品是面向读者的**完整叙事**，不是对备注版大纲的缩写。
2. 人机（读者角色、批评家角色、教师角色、儿童权利专家角色等）交互，完善最终作品。

**补充说明：** 上述多角色是在同一轮对话中的多视角提示（用格式区分角色后输出），角色可选；每个角色的深度重点可选，如逻辑、知识、适龄性、文风、可读性等。

---

## 二、资料库和记忆系统

### 1. 创作档案

记录每一次创作过程中的所有资料，以备后续利用。

**补充说明：** 包括记录每次修改的版本和差异（便于回溯与偏好分析），支持「从某次档案克隆并开新项目」（续写、系列增写、改写）。

### 2. 创作知识库

1. 预置创作知识，有一定结构。
2. 用户提供的创作知识。
3. LLM 总结每次创作过程中用户的创作偏好。

### 3. 作品类型库（类似 Midjourney 风格库）

1. **以经典作家、经典作品的形式定义类型。**
   - 预置。
   - 用户补充。
   - LLM 在与用户的交互中生成。
2. **为类型补充作品和评论资料。**
   - 用户在类型下补充作品和评论资料。
   - LLM 从互联网搜索作品和评论，补充到类型下。

**补充说明：** 为类型增加**适龄标签**（如幼儿/低年级/高年级/初中等），与目标读者绑定；除「作家/作品」维度外，可支持用户自定义标签（如冒险、科普、温情等），便于检索与组合。

### 4. 知识库

各种知识相关的图文资料。

1. 用户提供。
2. LLM 从互联网搜索后加入。

**补充说明：** 若 LLM 从互联网搜索并写入知识库，知识条目需保留来源、时间与可复核性（至少可追溯），以保障面向少年儿童的内容可靠；可选检索策略——是「先查知识库再生成」还是「生成后再用知识库校验」，会影响产品形态与 prompt 设计。

---

## 三、实现与风险

### 分阶段落地

- **第一版（MVP）：** 需求梳理 → 提纲 → 最终作品，辅以简单的创作档案；先验证「少年儿童向 + 人机协作」的核心价值。
- **第二版：** 引入「备注版大纲」及配套的结构/标记与拆分策略。
- **第三版：** 接入类型库、知识库及互联网搜索等能力。

### 适龄与内容安全

目标读者是少年儿童，在写作要点与系统层面显式纳入：

- 年龄/年级；
- 内容安全与敏感话题策略（如暴力、恐惧、情感等）；
- 可选：在最终稿生成后增加一步「适龄自检」（如用专门 prompt 做一次适龄性检查）。

### 技术选型

- 形态：VSCode扩展。
- 备注版大纲、提纲、最终作品是多文件/多节点形式存储。
- 多模型分工（如提纲/备注版大纲用一模型，最终润色用另一模型）以平衡成本与质量。

---

## 四、文档与设计核对清单

便于后续迭代时自查，可对照补充或细化：

- [ ] 写作要点的结构化字段（目标读者、体裁、禁忌等）已定义。
- [ ] 备注版大纲的轻量 schema 或标记体系已约定（区分设定集 vs 场景备注；备注内区分须达成/可选）。
- [ ] 备注版大纲与最终作品的篇幅/拆分策略已明确。
- [ ] 创作档案的版本管理与克隆策略已确定。
- [ ] 类型库的适龄标签与用户自定义标签已设计。
- [ ] 知识库的来源、追溯与检索策略已明确。
- [ ] 分阶段实现顺序（MVP → 备注版大纲 → 类型库/知识库）已确认。
- [ ] 适龄与内容安全策略已纳入写作要点与流程。

---

*本文档在 initial-idea.md 基础上，结合讨论建议整理而成，供后续设计与开发参考。*
